:original_name: ShowCheckpoint.html

.. _ShowCheckpoint:

Querying a Restore Point
========================

Function
--------

This API is used to query a specified restore point based on its ID.

URI
---

GET /v3/{project_id}/checkpoints/{checkpoint_id}

.. table:: **Table 1** Path Parameters

   ============= ========= ====== ================
   Parameter     Mandatory Type   Description
   ============= ========= ====== ================
   checkpoint_id Yes       String Restore point ID
   project_id    Yes       String Project ID
   ============= ========= ====== ================

Request Parameters
------------------

.. table:: **Table 2** Request header parameters

   +--------------+-----------+--------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter    | Mandatory | Type   | Description                                                                                                                                                         |
   +==============+===========+========+=====================================================================================================================================================================+
   | X-Auth-Token | No        | String | User token The token can be obtained by calling the IAM API used to obtain a user token. The value of **X-Subject-Token** in the response header is the user token. |
   +--------------+-----------+--------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 3** Response body parameters

   +------------+----------------------------------------------------------------------------+---------------------------+
   | Parameter  | Type                                                                       | Description               |
   +============+============================================================================+===========================+
   | checkpoint | :ref:`CheckpointCreate <showcheckpoint__response_checkpointcreate>` object | Restore point information |
   +------------+----------------------------------------------------------------------------+---------------------------+

.. _showcheckpoint__response_checkpointcreate:

.. table:: **Table 4** CheckpointCreate

   +-----------------------+------------------------------------------------------------------------------------------+------------------------------------------------------------+
   | Parameter             | Type                                                                                     | Description                                                |
   +=======================+==========================================================================================+============================================================+
   | created_at            | String                                                                                   | Creation time, for example, **2020-02-05T10:38:34.209782** |
   +-----------------------+------------------------------------------------------------------------------------------+------------------------------------------------------------+
   | id                    | String                                                                                   | Restore point ID                                           |
   +-----------------------+------------------------------------------------------------------------------------------+------------------------------------------------------------+
   | project_id            | String                                                                                   | Project ID                                                 |
   +-----------------------+------------------------------------------------------------------------------------------+------------------------------------------------------------+
   | status                | String                                                                                   | Status                                                     |
   |                       |                                                                                          |                                                            |
   |                       |                                                                                          | Enumeration values:                                        |
   |                       |                                                                                          |                                                            |
   |                       |                                                                                          | -  **available**                                           |
   |                       |                                                                                          |                                                            |
   |                       |                                                                                          | -  **deleting**                                            |
   |                       |                                                                                          |                                                            |
   |                       |                                                                                          | -  **protecting**                                          |
   |                       |                                                                                          |                                                            |
   |                       |                                                                                          | -  **deleted**                                             |
   |                       |                                                                                          |                                                            |
   |                       |                                                                                          | -  **error-deleting**                                      |
   |                       |                                                                                          |                                                            |
   |                       |                                                                                          | -  **error**                                               |
   +-----------------------+------------------------------------------------------------------------------------------+------------------------------------------------------------+
   | vault                 | :ref:`CheckpointPlanCreate <showcheckpoint__response_checkpointplancreate>` object       | Vault information                                          |
   +-----------------------+------------------------------------------------------------------------------------------+------------------------------------------------------------+
   | extra_info            | :ref:`CheckpointExtraInfoResp <showcheckpoint__response_checkpointextrainforesp>` object | Extended information                                       |
   +-----------------------+------------------------------------------------------------------------------------------+------------------------------------------------------------+

.. _showcheckpoint__response_checkpointplancreate:

.. table:: **Table 5** CheckpointPlanCreate

   +-------------------+--------------------------------------------------------------------------------------------------------------------+---------------------------------+
   | Parameter         | Type                                                                                                               | Description                     |
   +===================+====================================================================================================================+=================================+
   | id                | String                                                                                                             | Vault ID                        |
   +-------------------+--------------------------------------------------------------------------------------------------------------------+---------------------------------+
   | name              | String                                                                                                             | Vault name                      |
   +-------------------+--------------------------------------------------------------------------------------------------------------------+---------------------------------+
   | resources         | Array of :ref:`CheckpointResourceResp <showcheckpoint__response_checkpointresourceresp>` objects                   | Backup objects                  |
   +-------------------+--------------------------------------------------------------------------------------------------------------------+---------------------------------+
   | skipped_resources | Array of :ref:`CheckpointCreateSkippedResource <showcheckpoint__response_checkpointcreateskippedresource>` objects | Resources skipped during backup |
   +-------------------+--------------------------------------------------------------------------------------------------------------------+---------------------------------+

.. _showcheckpoint__response_checkpointresourceresp:

.. table:: **Table 6** CheckpointResourceResp

   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                                                                            |
   +=======================+=======================+========================================================================================================================+
   | extra_info            | String                | Extra information of the resource                                                                                      |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------+
   | id                    | String                | ID of the resource to be backed up                                                                                     |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------+
   | name                  | String                | Name of the resource to be backed up                                                                                   |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------+
   | protect_status        | String                | Protected status                                                                                                       |
   |                       |                       |                                                                                                                        |
   |                       |                       | Enumeration values:                                                                                                    |
   |                       |                       |                                                                                                                        |
   |                       |                       | -  **available**                                                                                                       |
   |                       |                       |                                                                                                                        |
   |                       |                       | -  **error**                                                                                                           |
   |                       |                       |                                                                                                                        |
   |                       |                       | -  **protecting**                                                                                                      |
   |                       |                       |                                                                                                                        |
   |                       |                       | -  **restoring**                                                                                                       |
   |                       |                       |                                                                                                                        |
   |                       |                       | -  **removing**                                                                                                        |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------+
   | resource_size         | String                | Allocated capacity for the associated resource, in GB                                                                  |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------+
   | type                  | String                | Type of the resource to be backed up, which can be **OS::Nova::Server**, **OS::Cinder::Volume**, or **OS::Sfs::Turbo** |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------+
   | backup_size           | String                | Backup size                                                                                                            |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------+
   | backup_count          | String                | Number of backups                                                                                                      |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------+

.. _showcheckpoint__response_checkpointcreateskippedresource:

.. table:: **Table 7** CheckpointCreateSkippedResource

   +-----------+--------+------------------------------------------------------------------------+
   | Parameter | Type   | Description                                                            |
   +===========+========+========================================================================+
   | id        | String | Resource ID                                                            |
   +-----------+--------+------------------------------------------------------------------------+
   | type      | String | Resource type                                                          |
   +-----------+--------+------------------------------------------------------------------------+
   | name      | String | Resource name                                                          |
   +-----------+--------+------------------------------------------------------------------------+
   | code      | String | For details, see :ref:`Error Codes <errorcode>`.                       |
   +-----------+--------+------------------------------------------------------------------------+
   | reason    | String | Reason for the skipping. For example, the resource is being backed up. |
   +-----------+--------+------------------------------------------------------------------------+

.. _showcheckpoint__response_checkpointextrainforesp:

.. table:: **Table 8** CheckpointExtraInfoResp

   ================== ======= ===========================================
   Parameter          Type    Description
   ================== ======= ===========================================
   name               String  Backup name
   description        String  Backup description
   retention_duration Integer Number of days that backups can be retained
   ================== ======= ===========================================

Example Requests
----------------

.. code-block:: text

   GET https://{endpoint}/v3/4229d7a45436489f8c3dc2b1d35d4987/checkpoints/8b0851a8-adf3-4f4c-a914-dead08bf9664



Example Responses
-----------------

**Status code: 200**

OK

.. code-block::

   {
     "checkpoint" : {
       "status" : "available",
       "created_at" : "2019-05-10T07:59:12.037+00:00",
       "vault" : {
         "id" : "3b5816b5-f29c-4172-9d9a-76c719a659ce",
         "resources" : [ {
           "name" : "ecs-1f0f-0002",
           "resource_size" : 40,
           "protect_status" : "available",
           "type" : "OS::Nova::Server",
           "id" : "94eba8b2-acc9-4d82-badc-127144cc5526"
         } ],
         "name" : "vault-be94"
       },
       "project_id" : "4229d7a45436489f8c3dc2b1d35d4987",
       "id" : "8b0851a8-adf3-4f4c-a914-dead08bf9664"
     }
   }

Status Codes
------------

=========== ===========
Status Code Description
=========== ===========
200         OK
=========== ===========

Error Codes
-----------

See :ref:`Error Codes <errorcode>`.
