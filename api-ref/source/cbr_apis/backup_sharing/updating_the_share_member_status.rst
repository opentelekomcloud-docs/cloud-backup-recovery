:original_name: UpdateMemberStatus.html

.. _UpdateMemberStatus:

Updating the Share Member Status
================================

Function
--------

This API is used to update the status of a backup share member.

URI
---

PUT /v3/{project_id}/backups/{backup_id}/members/{member_id}

.. table:: **Table 1** Path Parameters

   +------------+-----------+--------+---------------------------------------------------+
   | Parameter  | Mandatory | Type   | Description                                       |
   +============+===========+========+===================================================+
   | backup_id  | Yes       | String | Backup ID                                         |
   +------------+-----------+--------+---------------------------------------------------+
   | member_id  | Yes       | String | Member ID, which is the same ID as in project ID. |
   +------------+-----------+--------+---------------------------------------------------+
   | project_id | Yes       | String | Project ID                                        |
   +------------+-----------+--------+---------------------------------------------------+

Request Parameters
------------------

.. table:: **Table 2** Request header parameters

   +--------------+-----------+--------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter    | Mandatory | Type   | Description                                                                                                                                                         |
   +==============+===========+========+=====================================================================================================================================================================+
   | X-Auth-Token | Yes       | String | User token The token can be obtained by calling the IAM API used to obtain a user token. The value of **X-Subject-Token** in the response header is the user token. |
   +--------------+-----------+--------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. table:: **Table 3** Request body parameters

   +-----------------+-----------------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type            | Description                                                                                                                                                                                                                                        |
   +=================+=================+=================+====================================================================================================================================================================================================================================================+
   | status          | Yes             | String          | Status of a shared backup                                                                                                                                                                                                                          |
   |                 |                 |                 |                                                                                                                                                                                                                                                    |
   |                 |                 |                 | Enumeration values:                                                                                                                                                                                                                                |
   |                 |                 |                 |                                                                                                                                                                                                                                                    |
   |                 |                 |                 | -  **accepted**                                                                                                                                                                                                                                    |
   |                 |                 |                 |                                                                                                                                                                                                                                                    |
   |                 |                 |                 | -  **pending**                                                                                                                                                                                                                                     |
   |                 |                 |                 |                                                                                                                                                                                                                                                    |
   |                 |                 |                 | -  **rejected**                                                                                                                                                                                                                                    |
   +-----------------+-----------------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | vault_id        | No              | String          | Vault in which the shared backup is to be stored. Only UUID is supported. When updating the status of a backup sharing member, if the backup is accepted, **vault_id** must be specified. If the backup is rejected, **vault_id** is not required. |
   +-----------------+-----------------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 4** Response body parameters

   +-----------+------------------------------------------------------------+----------------------------------------------------------------------+
   | Parameter | Type                                                       | Description                                                          |
   +===========+============================================================+======================================================================+
   | member    | :ref:`Member <updatememberstatus__response_member>` object | Response parameters of querying the details of a backup share member |
   +-----------+------------------------------------------------------------+----------------------------------------------------------------------+

.. _updatememberstatus__response_member:

.. table:: **Table 5** Member

   +-----------------------+-----------------------+------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                      |
   +=======================+=======================+==================================================================+
   | status                | String                | Backup sharing status                                            |
   |                       |                       |                                                                  |
   |                       |                       | Enumeration values:                                              |
   |                       |                       |                                                                  |
   |                       |                       | -  **pending**                                                   |
   |                       |                       |                                                                  |
   |                       |                       | -  **accepted**                                                  |
   |                       |                       |                                                                  |
   |                       |                       | -  **rejected**                                                  |
   +-----------------------+-----------------------+------------------------------------------------------------------+
   | created_at            | String                | Backup sharing time, for example, **2020-02-05T10:38:34.209782** |
   +-----------------------+-----------------------+------------------------------------------------------------------+
   | updated_at            | String                | Update time, for example, **2020-02-05T10:38:34.209782**         |
   +-----------------------+-----------------------+------------------------------------------------------------------+
   | backup_id             | String                | Backup ID                                                        |
   +-----------------------+-----------------------+------------------------------------------------------------------+
   | image_id              | String                | ID of the image created by using the accepted shared backup      |
   +-----------------------+-----------------------+------------------------------------------------------------------+
   | dest_project_id       | String                | ID of the project with which the backup is shared                |
   +-----------------------+-----------------------+------------------------------------------------------------------+
   | vault_id              | String                | ID of the vault where the shared backup is stored                |
   +-----------------------+-----------------------+------------------------------------------------------------------+
   | id                    | String                | ID of the shared record                                          |
   +-----------------------+-----------------------+------------------------------------------------------------------+

Example Requests
----------------

.. code-block:: text

   PUT https://{endpoint}/v3/f841e01fd2b14e7fa41b6ae7aa6b0594/backups/a5200268-74a5-4806-acc6-95793ab0228b/members/f841e01fd2b14e7fa41b6ae7aa6b0594

   {
     "status" : "accepted",
     "vault_id" : "4b27c05b-8ad7-48c6-a886-526666c035f0"
   }

Example Responses
-----------------

**Status code: 200**

OK

.. code-block::

   {
     "member" : {
       "status" : "accepted",
       "backup_id" : "17c9acd8-3af3-4401-bab9-ff1cfac15561",
       "vault_id" : "4b27c05b-8ad7-48c6-a886-526666c035f0",
       "dest_project_id" : "0761021b8900d2622f38c0115db0b331",
       "created_at" : "2020-02-24T09:36:00.479+00:00",
       "id" : "824a90b3-c562-448b-ab04-60ea4a97cf60"
     }
   }

Status Codes
------------

=========== ===========
Status Code Description
=========== ===========
200         OK
=========== ===========

Error Codes
-----------

See :ref:`Error Codes <errorcode>`.
